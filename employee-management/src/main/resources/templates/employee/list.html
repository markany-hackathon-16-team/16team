<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>인력 관리 시스템</title>
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1><a href="/" style="text-decoration: none; color: inherit;">마크애니 관리 시스템</a></h1>
        
        <!-- 탭 메뉴 -->
        <div class="tab-menu">
            <a href="/" class="tab-item">대시보드</a>
            <a href="/employees" class="tab-item active">인력 관리</a>
            <a href="/projects" class="tab-item">프로젝트 관리</a>
        </div>
        
        <div class="content">
            <div class="header-actions">
                <a href="/employees/new" class="btn btn-primary">직원 등록</a>
            </div>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>직원ID</th>
                        <th>이름</th>
                        <th>역할</th>
                        <th>경력</th>
                        <th>레벨</th>
                        <th>가용성</th>
                        <th>현재 프로젝트</th>
                        <th>스킬</th>
                        <th>액션</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="employee : ${employees}">
                        <td th:text="${employee.empId}"></td>
                        <td th:text="${employee.name}"></td>
                        <td th:text="${employee.role}"></td>
                        <td th:text="${employee.yearsExp} + '년'"></td>
                        <td th:text="${employee.level}"></td>
                        <td th:text="${employee.available}"></td>
                        <td>
                            <span th:if="${employee.currentProject != null and !employee.currentProject.isEmpty()}">
                                <a th:href="@{/projects/{id}/edit(id=${employee.currentProject})}" 
                                   th:text="${projectNames[employee.currentProject] ?: employee.currentProject}"
                                   class="project-link"></a>
                            </span>
                            <span th:unless="${employee.currentProject != null and !employee.currentProject.isEmpty()}">-</span>
                        </td>
                        <td th:text="${employee.skills}"></td>
                        <td>
                            <a th:href="@{/employees/{id}/edit(id=${employee.empId})}" class="btn btn-sm">수정</a>
                            <form th:action="@{/employees/{id}/delete(id=${employee.empId})}" method="post" style="display:inline;">
                                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('삭제하시겠습니까?')">삭제</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
